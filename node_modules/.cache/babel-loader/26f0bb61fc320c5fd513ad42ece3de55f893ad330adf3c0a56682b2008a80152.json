{"ast":null,"code":"var _jsxFileName = \"/home/volodya-work/Desktop/project-loto/react-loto/src/pages/Login.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as Yup from 'yup';\nimport { useFormik } from 'formik';\nimport { Alert, Box, Container, CssBaseline } from '@mui/material';\nimport Form from \"../components/form/Form\";\nimport axios from \"axios\";\nimport { isAuth } from \"../helpers/isAuth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n  const [authError, setAuthError] = useState(false);\n  const navigate = useNavigate();\n  const isAuthenticated = isAuth();\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/');\n    }\n  }, [isAuthenticated, navigate]);\n  const formik = useFormik({\n    initialValues: {\n      email: '',\n      password: ''\n    },\n    validationSchema: Yup.object({\n      email: Yup.string().email('Invalid email').required('Invalid email'),\n      password: Yup.string().min(5, 'Too Short!').max(15, 'Too Long!').required('Invalid password')\n    }),\n    onSubmit: values => {\n      handleOnSubmit(values);\n    }\n  });\n  const fields = [{\n    id: 'email',\n    name: 'email',\n    label: 'Email',\n    type: 'type'\n  }, {\n    id: 'password',\n    name: 'password',\n    label: 'Password',\n    type: 'password'\n  }];\n  const navigationData = {\n    text: \"Don't have an account?\",\n    path: '/register'\n  };\n  const handleNavigate = path => event => {\n    navigate(path);\n  };\n  const errorHandler = () => {\n    setAuthError(true);\n    setTimeout(() => {\n      setAuthError(false);\n    }, 3000);\n  };\n  const handleOnSubmit = values => {\n    try {\n      axios.post(`${process.env.REACT_APP_SERVER_API_URI}/auth/login`, values).then(res => {\n        if (res.data.error) {\n          errorHandler();\n        } else {\n          localStorage.setItem(process.env.REACT_APP_AUTH_JWT, res.data.token);\n          navigate('/profile');\n        }\n      }).catch(e => {\n        errorHandler();\n      });\n    } catch (e) {\n      errorHandler();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        width: 700,\n        mx: 'auto',\n        my: 4,\n        py: 3,\n        px: 2,\n        display: 'flex',\n        flexDirection: 'column',\n        gap: 2,\n        borderRadius: 5,\n        boxShadow: 'md',\n        border: '1px solid #ccc'\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        component: \"main\",\n        maxWidth: \"xs\",\n        children: [/*#__PURE__*/_jsxDEV(CssBaseline, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }, this), authError ? /*#__PURE__*/_jsxDEV(Alert, {\n          severity: \"error\",\n          children: \"Something went wrong\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 27\n        }, this) : null, /*#__PURE__*/_jsxDEV(Form, {\n          formik: formik,\n          handleNavigate: handleNavigate,\n          fields: fields,\n          navigationData: navigationData,\n          page: 'Login'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 19\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }, this)\n  }, void 0, false);\n}\n_s(Login, \"caS+Nn8QJ65SRQN0Zck7xOdBU3g=\", false, function () {\n  return [useNavigate, useFormik];\n});\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useEffect","useState","useNavigate","Yup","useFormik","Alert","Box","Container","CssBaseline","Form","axios","isAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","Login","_s","authError","setAuthError","navigate","isAuthenticated","formik","initialValues","email","password","validationSchema","object","string","required","min","max","onSubmit","values","handleOnSubmit","fields","id","name","label","type","navigationData","text","path","handleNavigate","event","errorHandler","setTimeout","post","process","env","REACT_APP_SERVER_API_URI","then","res","data","error","localStorage","setItem","REACT_APP_AUTH_JWT","token","catch","e","children","sx","width","mx","my","py","px","display","flexDirection","gap","borderRadius","boxShadow","border","component","maxWidth","fileName","_jsxFileName","lineNumber","columnNumber","severity","page","_c","$RefreshReg$"],"sources":["/home/volodya-work/Desktop/project-loto/react-loto/src/pages/Login.tsx"],"sourcesContent":["import {MouseEvent, useEffect, useState} from \"react\";\nimport {useNavigate} from \"react-router-dom\";\nimport * as Yup from 'yup';\nimport {useFormik} from 'formik';\nimport {Alert, Box, Container, CssBaseline} from '@mui/material'\nimport Form from \"../components/form/Form\";\nimport {IFormField} from \"../interfaces/global\";\nimport axios from \"axios\";\nimport {isAuth} from \"../helpers/isAuth\";\n\ninterface IFormData {\n    email: string\n    password: string\n}\n\nexport default function Login() {\n    const [authError, setAuthError] = useState<boolean>(false)\n    const navigate = useNavigate()\n\n    const isAuthenticated = isAuth()\n    useEffect(() => {\n        if (!isAuthenticated) {\n            navigate('/')\n        }\n    }, [isAuthenticated, navigate]);\n\n    const formik = useFormik({\n        initialValues: {\n            email: '',\n            password: '',\n        },\n        validationSchema: Yup.object({\n            email: Yup.string().email('Invalid email').required('Invalid email'),\n            password: Yup.string()\n              .min(5, 'Too Short!')\n              .max(15, 'Too Long!')\n              .required('Invalid password'),\n        }),\n        onSubmit: (values) => {\n            handleOnSubmit(values)\n        },\n    });\n\n    const fields: IFormField[] = [\n        {\n            id: 'email',\n            name: 'email',\n            label: 'Email',\n            type: 'type'\n        },\n        {\n            id: 'password',\n            name: 'password',\n            label: 'Password',\n            type: 'password'\n        },\n    ]\n    const navigationData = {\n        text: \"Don't have an account?\",\n        path: '/register'\n    }\n\n    const handleNavigate = (path: string) => (event: MouseEvent<HTMLElement>) => {\n        navigate(path)\n    }\n\n    const errorHandler = () => {\n        setAuthError(true)\n        setTimeout(() => {\n            setAuthError(false)\n        }, 3000)\n    }\n\n    const handleOnSubmit = (values: IFormData) => {\n        try {\n            axios.post(`${process.env.REACT_APP_SERVER_API_URI}/auth/login`, values)\n              .then(res => {\n                  if (res.data.error) {\n                      errorHandler()\n                  } else {\n                      localStorage.setItem(process.env.REACT_APP_AUTH_JWT as string, res.data.token)\n                      navigate('/profile')\n                  }\n              })\n              .catch(e => {\n                  errorHandler()\n              })\n        } catch (e) {\n            errorHandler()\n        }\n    }\n    return (\n      <>\n          <Box\n            sx={{\n                width: 700,\n                mx: 'auto',\n                my: 4,\n                py: 3,\n                px: 2,\n                display: 'flex',\n                flexDirection: 'column',\n                gap: 2,\n                borderRadius: 5,\n                boxShadow: 'md',\n                border: '1px solid #ccc',\n            }}\n          >\n              <Container component=\"main\" maxWidth=\"xs\">\n                  <CssBaseline/>\n                  {\n                      authError\n                        ? <Alert severity=\"error\">Something went wrong</Alert>\n                        : null\n                  }\n                  <Form formik={formik}\n                        handleNavigate={handleNavigate}\n                        fields={fields}\n                        navigationData={navigationData}\n                        page={'Login'}\n                  />\n              </Container>\n          </Box>\n      </>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}